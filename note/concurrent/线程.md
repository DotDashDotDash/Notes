# Java线程

## 线程的生命周期

<div align=center><img src="/assets/thread.png"/></div>

* 直接调用stop()结束线程经常会导致线程死锁
* 终止线程的4种方式:
  * 程序正常结束
  * 标志控制线程结束，通常标志由volatile关键字标记
  * interrupt()结束:
    * 情况1: 线程处于阻塞状态: 直接调用interrupt()会抛出一个异常，捕获这个异常同时跳出循环，线程才能结束，**只有调用interrupt()捕获异常，break跳出循环，线程才能正常退出run()**
    * 情况2: 线程处于非阻塞状态: 调用interrupt()后，isInterrupted()会返回true，和上面一样跳出循环
  * stop()强制终止线程，这种终止线程的方法不是线程安全的，因为当调用stop()方法的时候，所有子模块的锁都会被释放，可能给系统带来无法承受的问题
* sleep()和wait()的区别: **sleep()不会释放锁，而wait()会释放锁重新进入争夺锁的队列**
* start()和run()的区别: start()让线程进入就绪状态，不一定开始执行，而run()是线程执行的入口处，表示线程体的内容已经开始执行了
* [必看线程有关的测试代码MyThreadCircle.java](/src/concurrent/MyThreadCircle.java)