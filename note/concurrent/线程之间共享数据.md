# 线程之间共享数据

* 将变量定义在一个类中，将该类内部的方法设置城synchronized，这样在调用类方法的时候就会给类实例上锁，达到互斥访问的目的

```java
package concurrent;

public class MyThreadDataShare {

    public static void main(String[] args){
        Data data = new MyThreadDataShare().new Data();
        MyThreadDataShare threadDataShare = new MyThreadDataShare();

        Thread t1 = new Thread(()->{
            System.out.println(Thread.currentThread().getName() + " increase the shared data...");
            data.increase();
        });

        Thread t2 = new Thread(()->{
            System.out.println(Thread.currentThread().getName() + " decrease the shared data...");
            data.decrease();
        });

        t1.start();
        t2.start();

        //check the result, supposed to be 0
        System.out.println("data: " + data.data);
    }


    class Data{
        int data = 0;

        synchronized void increase(){
            this.data++;
        }

        synchronized void decrease(){
            this.data--;
        }
    }
}
```

执行结果为

```java
data: 0
Thread-1 decrease the shared data...
Thread-0 increase the shared data...
```

* 当所有的线程的操作都是一样的时候，共享一个Runnable对象也可以实现线程数据共享，过于简单，不再赘述

## 参考链接

* [MyThreadDataShare.java](/src/concurrent/MyThreadDataShare.java)
* [并发编程--多个线程共享数据](https://blog.csdn.net/hejingyuan6/article/details/47053409)
