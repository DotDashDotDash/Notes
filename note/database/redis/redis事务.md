# Redis事务

## Redis事务的概念

Redis 事务的本质是一组命令的集合。事务支持一次执行多个命令，一个事务中所有命令都会被序列化。在事务执行过程，会按照顺序串行化执行队列中的命令，其他客户端提交的命令请求不会插入到事务执行命令序列中。

总结说：redis事务就是一次性、顺序性、排他性的执行一个队列中的一系列命令。　　

* Redis事务没有隔离级别的概念：
* 批量操作在发送 EXEC 命令前被放入队列缓存，并不会被实际执行，也就不存在事务内的查询要看到事务里的更新，事务外查询不能看到。
* Redis不保证原子性：

Redis中，单条命令是原子性执行的，但事务不保证原子性，且没有回滚。事务中任意命令执行失败，其余的命令仍会被执行。

## Redis事务的三个阶段

* 开始事务
* 命令入队
* 执行事务

## WATCH

`watch`需运行在`multi`与`exec`之外，也就是说，`watch`需运行在事务之外，redis可利用`watch`来进行加锁，其中加的锁是乐观锁，也就是说，当事物内部监视到元素发生变化，事务立即失败

## 参考链接

* [Redis事务](https://www.cnblogs.com/DeepInThought/p/10720132.html)
* [菜鸟教程Redis事务](https://www.runoob.com/redis/redis-transactions.html)
